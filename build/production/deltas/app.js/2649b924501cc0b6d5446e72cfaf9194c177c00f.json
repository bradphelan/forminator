["/*41be7aad6f289a1def36c5ce9c331d03ed0915cc",42,227233,",width:\"80%\",height:\"80%\",layout:\"vbox\"",295309,35,"this.add([{xtype:\"panel\",items:[{xtype:\"panel\",",227321,145,",width:\"100%\",height:\"100%\"}],scrollable:\"auto\",flex:1",227466,165,"var a;Ext.define(\"app.view.Canvas\",{xtype:\"canvas\",extend:\"Ext.Panel\",canvas:function(){return this.element.query(\"canvas\")[0]},config:{bubbleEvents:\"canvasResized\"},debounce:function(c,d){var b,e=this;b=null;return function(){var f;if(b!=null){window.clearTimeout(b);b=null}f=function(){return c.apply(e,arguments)};return b=window.setTimeout(f,d)}},doResize:function(){var b;b=this.element.getSize();$(this.canvas()).width(b.width-10);$(this.canvas()).height(b.height-10);return this.fireEvent(\"canvasResized\",b)},initialize:function(){var b;this.setHtml(\"<canvas></canvas>\");this.addListener({resize:this.doResize,painted:this.doResize});b=this.element.getSize();$(this.canvas()).width(b.width-10);return $(this.canvas()).height(b.height-10)}});Ext.define(\"app.view.Sketch\",{extend:\"Ext.Panel\",xtype:\"sketch\",config:{cls:\"sketcher\",layout:\"vbox\",useToolbar:true,bubbleEvents:[\"change\"],items:[{xtype:\"panel\",cls:\"tools\",html:\"<div class='toolbar'></div>\",align:\"left\",docked:\"top\"},{xtype:\"canvas\",border:\"1 1 1 1\",flex:1}]},insertTools:function(){var f,b,j,g,e,i,c,h,d;b=[\"#f00\",\"#ff0\",\"#0f0\",\"#0ff\",\"#00f\",\"#f0f\",\"#000\",\"#fff\"];for(g=0,i=b.length;g<i;g++){f=b[g];this.jqFind(\".tools\").append(\"<a href='#colors_sketch' data-color='\"+f+\"' style='background: \"+f+\";'></a> \")}h=[3,5,10,15];d=[];for(e=0,c=h.length;e<c;e++){j=h[e];d.push(this.jqFind(\".tools\").append(\"<a href='#colors_sketch' data-size='\"+j+\"' style='background: #ccc'>\"+j+\"</a> \"))}return d},canvasDOM:function(){return this.query(\"canvas\")[0].canvas()},jqFind:function(){var b;return $((b=this.element).query.apply(b,arguments))},pngData:function(){return this.sketch.el.toDataURL(\"png\")},resize:function(b){this.sketch.size=b;return this.sketch.redraw()},initialize:function(){var b,c=this;this.callParent();b=this.canvasDOM();this.sketch=new a(b);$(b).data(\"sketch\",this.sketch);if(this.getUseToolbar()){this.insertTools()}this.addListener({canvasResized:function(d){return c.resize(d)}});return this.sketch.canvas.bind(\"sketch.change\",function(d){return c.fireEvent(\"change\",d)})}});a=(function(){b.name=\"Sketch\";function b(c,d){this.el=c;this.canvas=$(c);this.context=c.getContext(\"2d\");this.options=$.extend({toolLinks:true,defaultTool:\"marker\",defaultColor:\"#000000\",defaultSize:5},d);this.painting=false;this.color=this.options.defaultColor;this.size=this.options.defaultSize;this.tool=this.options.defaultTool;this.actions=[];this.action=[];this.canvas.bind(\"click mousedown mouseup mousemove mouseleave mouseout touchstart touchmove touchend touchcancel\",this.onEvent);if(this.options.toolLinks){$(\"body\").delegate('a[href=\"#'+(this.canvas.attr(\"id\"))+'\"]',\"click\",function(l){var h,k,g,m,j,f,i;k=$(this);h=$(k.attr(\"href\"));m=h.data(\"sketch\");i=[\"color\",\"size\",\"tool\"];for(j=0,f=i.length;j<f;j++){g=i[j];if(k.attr(\"data-\"+g)){m.set(g,$(this).attr(\"data-\"+g))}}if($(this).attr(\"data-download\")){m.download($(this).attr(\"data-download\"))}return false})}}b.prototype.download=function(d){var c;d||(d=\"png\");if(d===\"jpg\"){d=\"jpeg\"}c=\"image/\"+d;return window.open(this.el.toDataURL(c))};b.prototype.set=function(c,d){this[c]=d;return this.canvas.trigger(\"sketch.change\"+c,d)};b.prototype.startPainting=function(){this.painting=true;return this.action={tool:this.tool,color:this.color,size:parseFloat(this.size),events:[]}};b.prototype.stopPainting=function(){if(this.action){this.actions.push(this.action)}this.painting=false;this.action=null;this.redraw();return this.canvas.trigger(\"sketch.change\",this.actions)};b.prototype.onEvent=function(c){if(c.originalEvent&&c.originalEvent.targetTouches){c.pageX=c.originalEvent.targetTouches[0].pageX;c.pageY=c.originalEvent.targetTouches[0].pageY}$.sketch.tools[$(this).data(\"sketch\").tool].onEvent.call($(this).data(\"sketch\"),c);c.preventDefault();return false};b.prototype.redraw=function(){var c;this.el.width=this.canvas.width();this.el.height=this.canvas.height();this.context=this.el.getContext(\"2d\");c=this;$.each(this.actions,function(){if(this.tool){return $.sketch.tools[this.tool].draw.call(c,this)}});if(this.painting&&this.action){return $.sketch.tools[this.action.tool].draw.call(c,this.action)}};return b})();$.sketch={tools:{}};$.sketch.tools.marker={onEvent:function(b){switch(b.type){case\"mousedown\":case\"touchstart\":this.startPainting();break;case\"mouseup\":case\"mouseout\":case\"mouseleave\":case\"touchend\":case\"touchcancel\":this.stopPainting()}if(this.painting){this.action.events.push({x:b.pageX-this.canvas.offset().left,y:b.pageY-this.canvas.offset().top,event:b.type});return this.redraw()}},draw:function(g){var d,c,f,b,e;this.context.lineJoin=\"round\";this.context.lineCap=\"round\";this.context.beginPath();this.context.moveTo(g.events[0].x,g.events[0].y);e=g.events;for(f=0,b=e.length;f<b;f++){d=e[f];this.context.lineTo(d.x,d.y);c=d}this.context.strokeStyle=g.color;this.context.lineWidth=g.size;return this.context.stroke()}};$.sketch.tools.eraser={onEvent:function(b){return $.sketch.tools.marker.onEvent.call(this,b)},draw:function(c){var b;b=this.context.globalCompositeOperation;this.context.globalCompositeOperation=\"copy\";c.color=\"rgba(0,0,0,0)\";$.sketch.tools.marker.draw.call(this,c);return this.context.globalCompositeOperation=b}}",393680,51,227656,4479,"return true",232134,946,"a.getPagesUI().getLayout().setAnimation({type:\"slide\",direction:\"right\",duration:500});",233241,52,233132,109,"a.getPagesUI().getLayout().setAnimation({type:\"slide\",direction:\"left\",duration:500});",233241,522,"this.configureListeners();return this.updateState(",393676,55,"\",{xtype:\"medformpanel\",",233852,44,"{type:\"card\",animation:{type:\"slide\",direction:\"down\"}}",233902,1690,393694,33,"SketchField",125880,35,"sketchfield\",config:{component:{xtype:\"sketch\",minHeight:600,useToolbar:false}",315087,42,"return ",388836,35,"change:\"onSketchChange\"})},onSketchChange:function(a){return this.fireEvent(\"change\",this,a)",380373,38,"Component().pngData()",282688,34,"getValues()",359904,33,235608,122487,"nstructions:function(){return this.get(\"help\")},createItems:function(){var b,a,c;a=[];c=this.createTitle();b=this.createInstructions()",358121,66,"b,title:c",358228,1090,359335,73,");return b},createInstructions:function(){var b;b=this.callParent();if(b!=null){return b}else{return\"&nbsp;",391181,40,359471,301,"form.Sketch",390750,33,"config:{fields:[{name:\"points\",type:\"array\"}]},requires:[\"app.view.SketchField\"]",359600,39,"ketchfield\",minHeight:600,useToolbar:false,label:this.createLabel(),name:this.get(\"name\"",359503,53,359772,31810,"form.Sketch",391569,292,"type===\"sketch\"){return\"app.model.form.Sketch\"}else",391855,84,318268,37,391975,2442,",\"app.view.Sketch\"]",315088,39,"arguments);this.getNavigationBar().hide();",394485,43,";return this.push({xtype:\"formkiosk\"}",394527,93,",c=this",394620,62,"Ext.Viewport.add(a);return Ext.Ajax.request({params:JSON.stringify(b.getData(),void 0,2),method:\"POST\",headers:{\"Content-Type\":\"application/json;charset=utf-8\"},url:\"/form.json\",success:function(d){return console.log(\"YAY\")},error:function(){return console.log(\"Nein\")",227599,48,394753,96,"if(Ext.browser.userAgent.match(/PhantomJS/)){return false}",394862,1703]